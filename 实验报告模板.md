## 《云计算技术》期末实验大作业报告

### 0. 基本信息

- **课程名称**：云计算技术
- **学期/班级**：2025年秋/23大数据2班
- **小组编号/组名**：
- **选题编号与题目**：A6 / 镜像构建
- **成员信息**：
  -组长：潘丽娜-2361170060-分工 
  - 成员1：李梦君-2361170059-分工
  - 成员2：王露-236-分工
  - 成员3：潘婉钰-236-分工
- **完成日期**：2026-01-04
- **代码仓库地址**：`https://...`（如适用）

---

### 1. 摘要（200–300 字）

  本项目基于Ubuntu系统，使用Docker技术完成容器化应用部署。通过编写多阶段Dockerfile实现镜像瘦身，体积从895MB减少到158MB，优化率达82.3%。实现了端口映射、环境变量配置、卷挂载等功能，并通过脚本自动化验证了所有功能。项目体现了云计算的可复现、可验证、可解释原则。

---

### 2. 需求与目标

- **背景与问题描述**：学习Docker容器化技术，掌握镜像构建和容器管理
- **功能目标（必须项）**：
  - 目标1：编写Dockerfile构建镜像
  - 目标2：演示端口映射、环境变量、卷挂载
  - 目标3：实现版本标签管理
  - 目标4：镜像瘦身优化
- **性能/可靠性/安全目标（如有）**：镜像体积减少50%以上
- **不做的范围（明确边界）**：不涉及Kubernetes编排和云平台部署

---

### 3. 相关概念与原理

用自己的话说明与本项目最相关的概念（至少 3 点），并指出它们与项目实现的对应关系。

- 概念1（例如 NIST 云计算特征/服务模型）：容器化技术
  - 解释：将应用及其依赖打包成独立单元，实现环境一致性
  - 在本项目中的体现：使用Docker容器封装Flask应用
- 概念2（例如 虚拟化/容器/资源池化/可计量服务）：多阶段构建
  - 解释：使用多个FROM指令，前一阶段构建，后一阶段运行
  - 在本项目中的体现：Dockerfile分builder和runtime阶段
- 概念3（例如 OpenStack 组件/Neutron/Flavor/安全组/cloud-init）：镜像瘦身
  - 解释：通过Alpine基础镜像、删除缓存等方式减小镜像体积
  - 在本项目中的体现：从895MB优化到158MB

---

### 4. 实验环境与资源清单（可复现为第一原则）

#### 4.1 硬件与网络

- 机器数量：
- CPU/内存/磁盘：
- 网络环境（校园网/宿舍/实验室/是否需要 NAT）：

#### 4.2 软件与版本

- 宿主机 OS：Windows
- 虚拟化软件（如 KVM/VirtualBox/VMware）：
- Docker 版本：
- 其他依赖（数据库/语言运行时/镜像仓库等）：

---

### 5. 总体方案设计

#### 5.1 架构图/拓扑图

（贴图或 ASCII 图均可；必须标注关键组件与数据流/控制流）

<img width="1215" height="1172" alt="a07dded2846fcfc6eb2bedc2ba6072bb" src="https://github.com/user-attachments/assets/58d1599a-30da-4dc0-bed2-524710caf35c" />

<img width="1284" height="474" alt="71833c0af72fee3830e79519a52173c5" src="https://github.com/user-attachments/assets/e1be5015-e903-4911-bce6-16cae25ae373" />

---

### 6. 实现过程（按步骤写清楚“做了什么 + 为什么这么做”）

> 建议按“准备 -> 创建资源 -> 配置 -> 验证 -> 优化”的结构书写。

#### 6.1 准备工作

- 关键前置条件检查：系统环境检查、Docker安装状态检查、网络连接检查
- 初始化命令/脚本（如有）：setup-env.sh

#### 6.2 核心步骤与命令清单

将关键命令集中列出，并配必要解释（不要只贴一堆截图）。

（示例结构）

- 步骤 1：创建多阶段Dockerfile
  - 命令：
  -     cd ~/cloud-final-project/src
  -     vim Dockerfile
  - 参数解释：
  -     USER appuser: 切换到非root用户运行，提高安全性
  - 输出/结果（截图/日志）：
- 步骤 2：编写Flask应用
  - 命令：
  -     cd ~/cloud-final-project/src/app
  -     vim app.py
  - 参数解释：
  -     @app.route('/health'): 健康检查端点，用于Docker健康检查
  -     @app.route('/env'): 显示环境变量，验证容器配置
  - 输出/结果（截图/日志）：
- 步骤 3：构建镜像
  - 命令：
  -     cd ~/cloud-final-project/src
  -     vim build.sh
  -     chmod +x build.sh
  -     ./build.sh
  - 参数解释：
  -    t cloud-final-demo:base: 指定镜像名称和标签
  -    -f Dockerfile.base: 指定使用的Dockerfile文件
  -    docker tag: 创建新的镜像标签
  - 输出/结果（截图/日志）：
  - <img width="864" height="364" alt="image" src="https://github.com/user-attachments/assets/72b35752-a32f-40c4-a637-6eb99dd045ea" />
  <img width="864" height="264" alt="image" src="https://github.com/user-attachments/assets/11c46763-44d9-4fb2-b193-7950a3841e6a" />
  <img width="864" height="149" alt="image" src="https://github.com/user-attachments/assets/2bd10e01-899d-468e-96bb-5b7ae2344122" />
  <img width="865" height="224" alt="image" src="https://github.com/user-attachments/assets/6013bdba-c046-4c53-887d-3b0083aa2878" />
  <img width="864" height="414" alt="image" src="https://github.com/user-attachments/assets/b5d09d97-e419-4103-be65-19accafc3d9a" />
  <img width="865" height="195" alt="image" src="https://github.com/user-attachments/assets/74baf473-dd39-4d60-98ef-3ce82255a99b" />




  


- 步骤 4：运行演示
  - 命令：./run.sh
  - 参数解释：
  - 输出/结果（截图/日志）：
- 步骤 5：功能验证
  - 命令：./test.sh
  - 参数解释：
  - 输出/结果（截图/日志）：

#### 6.3 关键配置文件（如有）

贴出核心配置片段并解释字段含义。

---

### 7. 功能验证与结果展示

必须做到“可验证、可复现、可解释”。至少包含：

- **验证用例列表**（输入/操作 -> 预期 -> 实际结果）：
  - 用例1：
  - 用例2：
  - 用例3：
- **关键截图/输出**：
- **结果分析**：为什么能说明功能已达成？

---

### 8. 运维与排错（必写）

至少记录 3 个真实问题或人工“故障注入”的问题，采用统一格式：

- **问题 1**
  - 现象：
  - 定位过程（命令/日志/对照项）：
  - 根因：
  - 解决方法：
  - 复盘与预防：

（问题 2、问题 3 同理）

---

### 9. 安全与合规说明（按需）

- 账号/密钥如何管理（是否进仓库、是否加密、权限最小化）：
- 安全组/防火墙策略说明：
- 可能的安全风险与缓解措施：

---

### 10. 小组分工与贡献说明（必写）

采用“任务-负责人-工作量/证据”的方式，避免泛泛而谈。

| 模块/任务 | 负责人 | 贡献说明（commit/截图/文档链接） |
|---|---|---|
| 环境搭建 |  |  |
| 核心实现 |  |  |
| 验证与排错 |  |  |
| 报告与答辩 |  |  |

---

### 11. 总结与展望

- 本次实验学到的 3 点（对应课程内容）：
- 当前不足：
- 未来改进（功能、性能、可靠性、安全、自动化等）：

---

### 12. 附录

#### 12.1 资源清单（可选）

- 镜像/ISO/容器镜像来源：
- 参考资料（不少于 3 条，注明标题与来源）：

#### 12.2 一键复现（可选但加分）

如提供脚本/Makefile/README 步骤，请在此说明入口与用法。


